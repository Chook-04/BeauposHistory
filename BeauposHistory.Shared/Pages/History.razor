@page "/history"
@using BeauposHistory.Shared.Enums


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">


<div class="history-layout">
    <div class="sidebar-toggle-btn" @onclick="ToggleSidebar">
        <i class="fas @(isSidebarExpanded ? "fa-times" : "fa-bars")"></i>
    </div>
    <aside class="history-sidebar @(isSidebarExpanded ? "expanded" : "collapsed")" @onclick="ToggleSidebar">

        <!-- Date Filter -->
        <div class="date-filter">
            <span class="nav-btn">◀</span>
            <span class="date-text">@Label_FilterDateRange</span>
            <span class="nav-btn">▶</span>
            <span class="print-btn">🖨</span>
        </div>

        <!-- Collection -->
        <section class="sidebar-section">
            <div class="section-row">
                <span class="section-title">Collection</span>
                <span class="section-value">@Label_CollectionAmount</span>
            </div>

            <div class="collection-list">
                @if (CollectionMethods != null)
                {
                    @foreach (var item in CollectionMethods)
                    {
                        <div class="icon-row @(activeRowId == item.Id ? "active" : "")"
                             @onclick='() => SelectRow(item.Id)'>
                            <span><i class="fas fa-money-bill-wave"></i></span>
                            <span class="label-text">@item.Name</span>

                            <span>@item.LabelAmount</span>
                        </div>
                    }
                }
                else
                {
                    <span>Loading... no list</span>
                }
            </div>
        </section>

        <!-- Work -->
        <section class="sidebar-section">

            <div class="section-row">
                <span class="section-title">Work</span>
            </div>

            <div class="icon-row @(activeRowId == "work-order" ? "active" : "")" @onclick='() => SelectRow("work-order")'>
                <span><i class="fas fa-file-invoice"></i> </span>
                <span class="label-text">Order</span>

                <span>@Label_OrderCount</span>
            </div>

            <div class="icon-row @(activeRowId == "work-item" ? "active" : "")" @onclick='() => SelectRow("work-item")'>
                <span><i class="fas fa-boxes"></i> </span>
                <span class="label-text">Item</span>

                <span>@Label_ItemCount</span>
            </div>

            <div class="icon-row @(activeRowId == "work-customer" ? "active" : "")" @onclick='() => SelectRow("work-customer")'>
                <span><i class="fas fa-users"></i> </span>
                <span class="label-text">Customer</span>

                <span>@Label_CustomerCount</span>
            </div>

            <div class="icon-row @(activeRowId == "work-staff" ? "active" : "")" @onclick='() => SelectRow("work-staff")'>
                <span><i class="fas fa-user-tie"></i></span>
                <span class="label-text">Staff</span>

                <span>@Label_StaffCount</span>
            </div>
        </section>

        <!-- Outstanding -->
        <section class="sidebar-section">

            <div class="section-row">
                <span class="section-title">Outstanding</span>
                <span class="section-value">@Label_TotalOutstandingAmount</span>
            </div>

            <div class="icon-row danger @(activeRowId == "out-total" ? "active" : "")" @onclick='() => SelectRow("out-total")'>
                <span><i class="fas fa-hand-holding-usd"></i></span>
                <span class="label-text">Total Outstanding</span>
                <span>@Label_TotalOutstandingAmount</span>
            </div>

            <div class="icon-row info @(activeRowId == "out-coll" ? "active" : "")" @onclick='() => SelectRow("out-coll")'>
                <span><i class="fas fa-file-signature"></i></span>
                <span class="label-text">Outstanding Collection</span>
                <span>@Label_OutstandingCollectionAmount</span>
            </div>
        </section>

        <!-- Sign Up -->
        <section class="sidebar-section">

            <div class="section-row">
                <span class="section-title">Sign Up</span>
            </div>

            <div class="icon-row warning @(activeRowId == "signup-credit" ? "active" : "")" @onclick='() => SelectRow("signup-credit")'>
                <span><i class="fas fa-coins"></i> </span>
                <span class="label-text">Credit</span>
                <span>@Label_CreditAmount</span>
            </div>
            <div class="icon-row warning @(activeRowId == "signup-voucher" ? "active" : "")" @onclick='() => SelectRow("signup-voucher")'>
                <span><i class="fas fa-ticket-alt"></i> </span>
                <span class="label-text">Voucher</span>
                <span>@Label_Voucher</span>
            </div>
            <div class="icon-row warning @(activeRowId == "signup-point" ? "active" : "")" @onclick='() => SelectRow("signup-point")'>
                <span><i class="fas fa-star"></i> </span>
                <span class="label-text">Point</span>
                <span>@Label_Point</span>
            </div>
        </section>

        <!-- Redeem -->
        <section class="sidebar-section">

            <div class="section-row">
                <span class="section-title">Redeem</span>
            </div>

            <div class="icon-row warning @(activeRowId == "redeem-credit" ? "active" : "")" @onclick='() => SelectRow("redeem-credit")'>
                <span><i class="fas fa-coins"></i> </span>
                <span class="label-text">Credit</span>
                <span>@Label_CreditAmount</span>
            </div>
            <div class="icon-row warning @(activeRowId == "redeem-voucher" ? "active" : "")" @onclick='() => SelectRow("redeem-voucher")'>
                <span><i class="fas fa-ticket-alt"></i> </span>
                <span class="label-text">Voucher</span>
                <span>@Label_Voucher</span>
            </div>
            <div class="icon-row warning @(activeRowId == "redeem-point" ? "active" : "")" @onclick='() => SelectRow("redeem-point")'>
                <span><i class="fas fa-star"></i> </span>
                <span class="label-text">Point</span>
                <span>@Label_Point</span>
            </div>
        </section>

    </aside>


    @* <main class="history-main">
        <div class="list-header">
            <h2>@Label_DetailHeader</h2>
            <span>@Label_RecordFoundCount</span>
        </div>

        <div class="record-list">
            @for (int i = 0; i < 3; i++)
            {
                <div class="record-card">
                    <div>
                        <span class="record-id">@Label_RecordID</span>
                        <span class="record-amount">@Label_RecordAmount</span>
                    </div>

                    <div>
                        <div>@Label_RecordTimestamp</div>
                        <div>----------------------------------</div>
                        <div>Method: <span></span></div>
                        <div>Processed by: <strong>Staff_01</strong></div>
                    </div>
                </div>
            }
        </div>
    </main> *@




    <main class="history-main">
        @switch (CurrentView)
        {
            // -------- Collection --------
            case HistoryView.CollectionCash:
            case HistoryView.CollectionDebitCard:
            case HistoryView.CollectionCreditCard:
            case HistoryView.CollectionTNG:
            case HistoryView.CollectionOnline:
            case HistoryView.CollectionQRPay:
                <CollectionHistory View="CurrentView" />
                break;

            // -------- Work --------
            case HistoryView.WorkOrder:
            case HistoryView.WorkItem:
            case HistoryView.WorkCustomer:
            case HistoryView.WorkStaff:
                <WorkHistory View="CurrentView" />
                break;

            // -------- Outstanding --------
            case HistoryView.OutstandingTotal:
            case HistoryView.OutstandingCollection:
                <OutstandingHistory View="CurrentView" />
                break;

            // -------- Signup / Redeem --------
            case HistoryView.SignupCredit:
            case HistoryView.SignupVoucher:
            case HistoryView.SignupPoint:
            case HistoryView.RedeemCredit:
            case HistoryView.RedeemVoucher:
            case HistoryView.RedeemPoint:
                <SignupRedeemHistory View="CurrentView" />
                break;

            default:
                <div class="empty-state">
                    Please select a category
                </div>
                break;
        }
    </main>

</div>